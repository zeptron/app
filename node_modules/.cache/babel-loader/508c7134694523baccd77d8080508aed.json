{"ast":null,"code":"import _regeneratorRuntime from \"/Users/j/a/z/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/j/a/z/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/j/a/z/app/src/App.js\";\nimport React, { Component } from 'react';\nimport { Auth, Hub } from 'aws-amplify';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport './App.css';\nimport Router from './Router';\nimport UserContext from './UserContext';\nimport theme from './styles/theme.js';\n\nclass App extends Component {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      currentUser: {},\n      isLoaded: false\n    };\n\n    this.updateCurrentUser = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!user) {\n                _context.next = 3;\n                break;\n              }\n\n              _this.setState({\n                currentUser: user\n              });\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return Auth.currentAuthenticatedUser();\n\n            case 6:\n              user = _context.sent;\n\n              _this.setState({\n                currentUser: user,\n                isLoaded: true\n              });\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n\n              _this.setState({\n                currentUser: null,\n                isLoaded: true\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[3, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  componentDidMount() {\n    this.updateCurrentUser();\n    Hub.listen('auth', this);\n  }\n\n  onHubCapsule(capsule) {\n    const channel = capsule.channel,\n          payload = capsule.payload;\n\n    if (channel === 'auth' && payload.event !== 'signIn') {\n      this.updateCurrentUser();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(UserContext.Provider, {\n      value: {\n        user: this.state.currentUser,\n        updateCurrentUser: this.updateCurrentUser,\n        isLoaded: this.state.isLoaded\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/j/a/z/app/src/App.js"],"names":["React","Component","Auth","Hub","ThemeProvider","CssBaseline","Router","UserContext","theme","App","state","currentUser","isLoaded","updateCurrentUser","user","setState","currentAuthenticatedUser","componentDidMount","listen","onHubCapsule","capsule","channel","payload","event","render"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,GAAf,QAA0B,aAA1B;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAO,WAAP;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;;AAEA,MAAMC,GAAN,SAAkBR,SAAlB,CAA4B;AAAA;AAAA;;AAAA;AAAA;AAAA,SAC1BS,KAD0B,GAClB;AACNC,MAAAA,WAAW,EAAE,EADP;AAENC,MAAAA,QAAQ,EAAE;AAFJ,KADkB;;AAAA,SAe1BC,iBAf0B;AAAA,0EAeN,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA,mBACdA,IADc;AAAA;AAAA;AAAA;;AAEhB,cAAA,KAAI,CAACC,QAAL,CAAc;AAAEJ,gBAAAA,WAAW,EAAEG;AAAf,eAAd;;AAFgB;;AAAA;AAAA;AAAA;AAAA,qBAMGZ,IAAI,CAACc,wBAAL,EANH;;AAAA;AAMVF,cAAAA,IANU;;AAOhB,cAAA,KAAI,CAACC,QAAL,CAAc;AAAEJ,gBAAAA,WAAW,EAAEG,IAAf;AAAqBF,gBAAAA,QAAQ,EAAE;AAA/B,eAAd;;AAPgB;AAAA;;AAAA;AAAA;AAAA;;AAShB,cAAA,KAAI,CAACG,QAAL,CAAc;AAAEJ,gBAAAA,WAAW,EAAE,IAAf;AAAqBC,gBAAAA,QAAQ,EAAE;AAA/B,eAAd;;AATgB;AAAA;AAAA;AAAA;AAAA;AAAA,OAfM;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK1BK,EAAAA,iBAAiB,GAAG;AAClB,SAAKJ,iBAAL;AACAV,IAAAA,GAAG,CAACe,MAAJ,CAAW,MAAX,EAAmB,IAAnB;AACD;;AACDC,EAAAA,YAAY,CAACC,OAAD,EAAU;AAAA,UACZC,OADY,GACSD,OADT,CACZC,OADY;AAAA,UACHC,OADG,GACSF,OADT,CACHE,OADG;;AAEpB,QAAID,OAAO,KAAK,MAAZ,IAAsBC,OAAO,CAACC,KAAR,KAAkB,QAA5C,EAAsD;AACpD,WAAKV,iBAAL;AACD;AACF;;AAaDW,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAE;AAC3BV,QAAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWC,WADU;AAE3BE,QAAAA,iBAAiB,EAAE,KAAKA,iBAFG;AAG3BD,QAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAHM,OAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,aAAD;AAAe,MAAA,KAAK,EAAEJ,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACJ,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADI,eAEA;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFA,CALF,CADF;AAcD;;AA1CyB;;AA6C5B,eAAeC,GAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Auth, Hub } from 'aws-amplify'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport './App.css'\nimport Router from './Router'\nimport UserContext from './UserContext'\nimport theme from './styles/theme.js'\n\nclass App extends Component {\n  state = {\n    currentUser: {},\n    isLoaded: false\n  }\n  componentDidMount() {\n    this.updateCurrentUser()\n    Hub.listen('auth', this);\n  }\n  onHubCapsule(capsule) {\n    const { channel, payload } = capsule;\n    if (channel === 'auth' && payload.event !== 'signIn') {\n      this.updateCurrentUser()\n    }\n  }\n  updateCurrentUser = async (user) => {\n    if (user) {\n      this.setState({ currentUser: user })\n      return\n    }\n    try {\n      const user = await Auth.currentAuthenticatedUser()\n      this.setState({ currentUser: user, isLoaded: true })\n    } catch (err) {\n      this.setState({ currentUser: null, isLoaded: true })\n    }\n  }\n  render() {\n    return (\n      <UserContext.Provider value={{\n        user: this.state.currentUser,\n        updateCurrentUser: this.updateCurrentUser,\n        isLoaded: this.state.isLoaded\n      }}>\n        <ThemeProvider theme={theme}>\n    <CssBaseline />\n        <div className=\"App\">\n          <Router />\n        </div>\n        </ThemeProvider>\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}
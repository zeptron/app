{"ast":null,"code":"var _jsxFileName = \"/Users/j/a/z/app/src/Home.js\";\nimport React from 'react';\nimport { Auth } from 'aws-amplify';\nimport QRCode from 'qrcode.react';\nimport { css } from 'glamor';\nimport UserContext from './UserContext';\nimport Container from './Container';\nimport Button from './Button';\n\nclass Home extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      qrCode: '',\n      challengeAnswer: '',\n      showPreferred: false\n    };\n\n    this.addTTOP = () => {\n      const user = this.context.user;\n      Auth.setupTOTP(user).then(code => {\n        const authCode = \"otpauth://totp/AWSCognito:\" + user.username + \"?secret=\" + code + \"&issuer=AWSCognito\";\n        this.setState({\n          qrCode: authCode,\n          showPreferred: true\n        });\n      });\n    };\n\n    this.setPreferredMFA = authType => {\n      const user = this.context.user;\n      Auth.verifyTotpToken(user, this.state.challengeAnswer).then(() => {\n        Auth.setPreferredMFA(user, authType).then(data => console.log('data from verify...: ', data)).catch(err => console.log('error: ', err));\n      });\n    };\n  }\n\n  render() {\n    const isAuthenticated = this.context.user && this.context.user.username ? true : false;\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, \"Welcome\"), isAuthenticated && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      title: \"Update TOTP\",\n      onClick: this.addTTOP,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", Object.assign({}, css(styles.buttonContainer), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 15\n      }\n    }), this.state.qrCode !== '' && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(QRCode, {\n      value: this.state.qrCode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 23\n      }\n    })), this.state.showPreferred && /*#__PURE__*/React.createElement(\"div\", Object.assign({}, css(styles.buttonContainer), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", Object.assign({\n      onClick: () => this.setPreferredMFA('TOTP')\n    }, css(styles.button), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, \"Prefer TOTP\")), /*#__PURE__*/React.createElement(\"button\", Object.assign({\n      onClick: () => this.setPreferredMFA('SMS')\n    }, css(styles.button), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, \"Prefer SMS\")), /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      placeholder: \"TOTP Code\",\n      onChange: e => this.setState({\n        challengeAnswer: e.target.value\n      })\n    }, css(styles.input), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 23\n      }\n    }))))));\n  }\n\n}\n\nHome.contextType = UserContext;\nconst styles = {\n  buttonContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  button: {\n    cursor: 'pointer',\n    margin: 4,\n    border: '1px solid #ddd',\n    width: 225,\n    ':hover': {\n      backgroundColor: \"rgba(0, 0, 0, .1)\"\n    }\n  },\n  input: {\n    padding: 8,\n    height: 40,\n    width: 225,\n    border: '1px solid #ddd'\n  }\n};\nexport default Home;","map":{"version":3,"sources":["/Users/j/a/z/app/src/Home.js"],"names":["React","Auth","QRCode","css","UserContext","Container","Button","Home","Component","state","qrCode","challengeAnswer","showPreferred","addTTOP","user","context","setupTOTP","then","code","authCode","username","setState","setPreferredMFA","authType","verifyTotpToken","data","console","log","catch","err","render","isAuthenticated","styles","buttonContainer","button","e","target","value","input","contextType","display","flexDirection","alignItems","cursor","margin","border","width","backgroundColor","padding","height"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Auth } from 'aws-amplify'\nimport QRCode from 'qrcode.react'\nimport { css } from 'glamor'\nimport UserContext from './UserContext'\nimport Container from './Container'\nimport Button from './Button'\n\nclass Home extends React.Component {\n  state = {\n    qrCode: '',\n    challengeAnswer: '',\n    showPreferred: false\n  }\n  static contextType = UserContext\n\n  addTTOP = () => {\n    const { user } = this.context\n    Auth.setupTOTP(user).then((code) => {\n      const authCode = \"otpauth://totp/AWSCognito:\"+ user.username + \"?secret=\" + code + \"&issuer=AWSCognito\";\n      this.setState({\n        qrCode: authCode,\n        showPreferred: true\n      })\n    });\n  }\n  setPreferredMFA = (authType) => {\n    const { user } = this.context\n    Auth.verifyTotpToken(user, this.state.challengeAnswer).then(() => {\n      Auth.setPreferredMFA(user, authType)\n        .then(data => console.log('data from verify...: ', data))\n        .catch(err => console.log('error: ', err))\n    });\n  }\n  render() {\n    const isAuthenticated = this.context.user && this.context.user.username ? true : false\n    return (\n      <Container>\n        <h1>Welcome</h1>\n        {\n          isAuthenticated && (\n            <>\n              <Button\n                title=\"Update TOTP\"\n                onClick={this.addTTOP}\n              />\n              <div {...css(styles.buttonContainer)}>\n                {\n                  (this.state.qrCode !== '') && (\n                    <div>\n                      <br />\n                      <QRCode value={this.state.qrCode} />\n                    </div>\n                  )\n                }\n                {\n                  this.state.showPreferred && (\n                    <div {...css(styles.buttonContainer)}>\n                      <button\n                        onClick={() => this.setPreferredMFA('TOTP')}\n                        {...css(styles.button)}\n                      >\n                        <p>Prefer TOTP</p>\n                      </button>\n                      <button\n                        onClick={() => this.setPreferredMFA('SMS')}\n                        {...css(styles.button)}\n                      >\n                        <p>Prefer SMS</p>\n                      </button>\n                      <input\n                        placeholder='TOTP Code'\n                        onChange={e => this.setState({ challengeAnswer: e.target.value })}\n                        {...css(styles.input)}\n                      />\n                    </div>\n                  )\n                }\n              </div>\n            </>\n          )\n        }\n      </Container>\n    )\n  }\n}\n\nconst styles = {\n  buttonContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  button: {\n    cursor: 'pointer',\n    margin: 4,\n    border: '1px solid #ddd',\n    width: 225,\n    ':hover': {\n      backgroundColor: \"rgba(0, 0, 0, .1)\"\n    }\n  },\n  input: {\n    padding: 8,\n    height: 40,\n    width: 225,\n    border: '1px solid #ddd'\n  }\n}\n\n\nexport default Home"]},"metadata":{},"sourceType":"module"}